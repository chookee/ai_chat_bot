# ü§ñ Telegram-–±–æ—Ç —Å AI

> Telegram-–±–æ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ò–ò: –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Ollama) –∏ –æ–±–ª–∞—á–Ω—ã–µ API (OpenAI, DeepSeek, GenAPI, ProxyAPI). –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ –≤ –ø–∞–º—è—Ç–∏, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| **5 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** | Ollama, OpenAI, DeepSeek, GenAPI, ProxyAPI ‚Äî –≤—ã–±–æ—Ä –≤ `.env` —á–µ—Ä–µ–∑ `AI_PROVIDER` |
| **–ö–æ–Ω—Ç–µ–∫—Å—Ç** | –û—Ç–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ 20 —Å–æ–æ–±—â–µ–Ω–∏–π) |
| **–û—á–∏—Å—Ç–∫–∞** | –ö–æ–º–∞–Ω–¥—ã `/clear`, `/reset` –∏–ª–∏ —Ñ—Ä–∞–∑–∞ ¬´–æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç¬ª |
| **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã** | `TEMPERATURE` –∏ `MAX_TOKENS` –∑–∞–¥–∞—é—Ç—Å—è –≤ `.env` |
| **–õ–æ–≥–∏** | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python 3.10+**
- **–¢–æ–∫–µ–Ω –±–æ—Ç–∞** ([@BotFather](https://t.me/BotFather))
- **API-–∫–ª—é—á** —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (OpenAI / DeepSeek / GenAPI / ProxyAPI) –∏–ª–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π **Ollama**

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥
git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è> telegram-ai-bot
cd telegram-ai-bot

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
venv\Scripts\activate          # Windows
# source venv/bin/activate     # Linux / macOS

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
AI_PROVIDER=genapi
TEMPERATURE=0.7
MAX_TOKENS=1024

OPENAI_API_KEY=...
DEEPSEEK_API_KEY=...
GENAPI_API_KEY=...
PROXYAPI_API_KEY=...
OLLAMA_MODEL=qwen2.5:3b
OPENAI_MODEL=gpt-4o-mini
DEEPSEEK_MODEL=deepseek-chat
GENAPI_MODEL=gpt-4o-mini
PROXYAPI_MODEL=gpt-4o-mini
```

### –ó–∞–ø—É—Å–∫

```bash
python bot.py
```

–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –ø–æ –∏–º–µ–Ω–∏ –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥.

---

## ‚öôÔ∏è –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ `.env` | –ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á |
|-----------|---------------------|----------------|
| **Ollama** | `AI_PROVIDER=ollama`, `OLLAMA_MODEL=...` | –õ–æ–∫–∞–ª—å–Ω–æ, [ollama.ai](https://ollama.ai) |
| **OpenAI** | `OPENAI_API_KEY`, `OPENAI_MODEL` | [platform.openai.com](https://platform.openai.com) |
| **DeepSeek** | `DEEPSEEK_API_KEY`, `DEEPSEEK_MODEL` | [platform.deepseek.com](https://platform.deepseek.com) |
| **GenAPI** | `GENAPI_API_KEY`, `GENAPI_MODEL` | [gen-api.ru](https://gen-api.ru), [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://gen-api.ru/docs/schema-work) |
| **ProxyAPI** | `PROXYAPI_API_KEY`, `PROXYAPI_MODEL` | [console.proxyapi.ru](https://console.proxyapi.ru) |

–ï—Å–ª–∏ `AI_PROVIDER` –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π** –≤ –ø–æ—Ä—è–¥–∫–µ: Ollama ‚Üí OpenAI ‚Üí DeepSeek ‚Üí GenAPI ‚Üí ProxyAPI.

---

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ |
| `/clear` –∏–ª–∏ `/reset` | –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ |
| ¬´–æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç¬ª | –¢–æ –∂–µ, —Ç–µ–∫—Å—Ç–æ–º |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ bot.py              # –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (aiogram)
‚îú‚îÄ‚îÄ config.py            # –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ .env
‚îú‚îÄ‚îÄ context_manager.py   # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ –≤ –ø–∞–º—è—Ç–∏
‚îú‚îÄ‚îÄ ollama_client.py     # –ö–ª–∏–µ–Ω—Ç Ollama
‚îú‚îÄ‚îÄ openai_client.py     # –ö–ª–∏–µ–Ω—Ç OpenAI
‚îú‚îÄ‚îÄ deepseek_client.py   # –ö–ª–∏–µ–Ω—Ç DeepSeek
‚îú‚îÄ‚îÄ genapi_client.py     # –ö–ª–∏–µ–Ω—Ç GenAPI (–Ω–∞—Ç–∏–≤–Ω—ã–π API)
‚îú‚îÄ‚îÄ proxyapi_client.py   # –ö–ª–∏–µ–Ω—Ç ProxyAPI
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md
```

---

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–í `.env`:

- **`TEMPERATURE`** (0‚Ä¶2) ‚Äî —á–µ–º –Ω–∏–∂–µ, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –∏ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–Ω–µ–µ; –≤—ã—à–µ ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω–µ–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.7`.
- **`MAX_TOKENS`** ‚Äî –º–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ (–ø—É—Å—Ç–æ = –±–µ–∑ –∂—ë—Å—Ç–∫–æ–≥–æ –ª–∏–º–∏—Ç–∞).

---

## ‚ùì –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

| –ü—Ä–æ–±–ª–µ–º–∞ | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |
|----------|----------------|
| –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | –¢–æ–∫–µ–Ω –±–æ—Ç–∞, –Ω–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ API-–∫–ª—é—á–∞ –∏–ª–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Ollama, –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ |
| 401 / –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ö–ª—é—á –≤ `.env`, –±–∞–ª–∞–Ω—Å –∏ –ª–∏–º–∏—Ç—ã –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | `ollama list`, —Å–µ—Ä–≤–µ—Ä –Ω–∞ `http://localhost:11434` |
| –ü—Ä–æ–∫—Å–∏ / `proxies` | –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `httpx.Client(trust_env=False)` ‚Äî –ø—Ä–æ–∫—Å–∏ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω—ã –∏ API-–∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `.env` (—Ñ–∞–π–ª –≤ `.gitignore` –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è).
- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ `.env` –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –µ–≥–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

## üìä –í–ª–∏—è–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ –æ—Ç–≤–µ—Ç—ã (–ø—Ä–∏–º–µ—Ä—ã)

–ù–∏–∂–µ ‚Äî –ø—Ä–∏–º–µ—Ä—ã —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–µ–¥—ë—Ç —Å–µ–±—è –±–æ—Ç. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤** –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:

- **OpenAI** ‚Äî –≤ [Usage](https://platform.openai.com/usage) –∏–ª–∏ –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞ API: `response.usage.total_tokens`
- **DeepSeek / ProxyAPI** ‚Äî –≤ –æ—Ç–≤–µ—Ç–µ API (–ø–æ–ª–µ `usage`) –∏–ª–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **GenAPI** ‚Äî –≤ –æ—Ç–≤–µ—Ç–µ –ø–æ `request_id` (–ø–æ–ª–µ `cost` –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ gen-api.ru)
- **Ollama** ‚Äî –≤ –æ—Ç–≤–µ—Ç–µ API –µ—Å—Ç—å –ø–æ–ª–µ —Å –æ—Ü–µ–Ω–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏)

| –ú–æ–¥–µ–ª—å | temperature | max_tokens | ‚Ññ –ø—Ä–æ–≥–æ–Ω–∞ | –≠—Ñ—Ñ–µ–∫—Ç (—Å–∂–∞—Ç–æ—Å—Ç—å/–∫—Ä–µ–∞—Ç–∏–≤) | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã |
|--------|-------------|------------|-----------|----------------------------|------------------------|
| gpt-4o-mini (GenAPI) | 0.7 | 1024 | 1 | –£–º–µ—Ä–µ–Ω–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–Ω | —Å–º. Usage –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| gpt-4o-mini (GenAPI) | 0.2 | 512 | 2 | –ë–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã | —Å–º. Usage –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| gpt-4o-mini (GenAPI) | 1.0 | 1024 | 3 | –ë–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏, –≤–æ–∑–º–æ–∂–Ω—ã –¥–ª–∏–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã | —Å–º. Usage –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| Ollama (qwen2.5:3b) | 0.7 | 1024 | 4 | –õ–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ —É—á—ë—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ–±–ª–∞–∫–µ | ‚Äî |

*–ß—Ç–æ–±—ã –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è ¬´–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã¬ª, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª Usage/–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–ª–∏–µ–Ω—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è `usage` –∏–∑ –æ—Ç–≤–µ—Ç–∞ API.*

---

## üì§ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ GitHub

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞: [https://github.com/chookee/ai_chat_bot](https://github.com/chookee/ai_chat_bot).

**–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî —Å–∫—Ä–∏–ø—Ç (Windows):** –¥–≤–∞–∂–¥—ã –∑–∞–ø—É—Å—Ç–∏—Ç–µ `push_to_github.bat` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Git (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ), –¥–æ–±–∞–≤–∏—Ç remote, —Å–¥–µ–ª–∞–µ—Ç –∫–æ–º–º–∏—Ç –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–µ—Ç–∫—É `main` –Ω–∞ GitHub.

**–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –≤—Ä—É—á–Ω—É—é:** –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
git init
git remote add origin https://github.com/chookee/ai_chat_bot.git
git add .
git commit -m "Initial commit: Telegram AI bot"
git branch -M main
git push -u origin main
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (SSH-–∫–ª—é—á –∏–ª–∏ —Ç–æ–∫–µ–Ω). –§–∞–π–ª `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –ø–æ–ø–∞–¥—ë—Ç (—É–∫–∞–∑–∞–Ω –≤ `.gitignore`).

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª. –î–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API —É—Ç–æ—á–Ω—è–π—Ç–µ —É—Å–ª–æ–≤–∏—è —É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (OpenAI, DeepSeek, GenAPI, ProxyAPI).
